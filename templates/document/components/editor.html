<div x-data="editor('{{ document.content|default:''|escapejs }}')"

class="bg-white rounded-xl">
  <input type="hidden" name="content" x-model="htmlContent" />

  <!-- <div class="px-2 py-2 border-t rounded-t-lg border-x"> -->
    <div id="editorToolbar"  x-ref="toolbar" class="sticky top-0 z-50 flex flex-wrap bg-white border-t rounded-t-lg border-x">

    <!-- tool bar1 -->
    <div class="flex flex-wrap items-center gap-2 p-2 rounded-tl-lg md:mr-2">
      <div class="relative" x-data="{ open: false }">
        <button type="button" @click="open = !open" class="px-3 py-2 text-sm font-medium bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
          <span x-text="isActive('heading', { level: 1 }, updatedAt ) ? 'H1' :
            isActive('heading', { level: 2 }, updatedAt) ? 'H2' :
            isActive('heading', { level: 3 }, updatedAt) ? 'H3' :
            'Paragraph'"></span>
        </button>
        <div x-show="open" @click.away="open = false" class="absolute z-10 w-40 mt-2 bg-white rounded-md shadow-lg">
          <div class="py-1">
            <button type="button" @click="toggleHeading({ level: 1 }); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">H1</button>
            <button type="button" @click="toggleHeading({ level: 2 }); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">H2</button>
            <button type="button" @click="toggleHeading({ level: 3 }); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">H3</button>
            <button type="button" @click="toggleParagraph(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Paragraph</button>
          </div>
        </div>
      </div>
      <button
      type="button"
          @click="toggleBold"
          :class="{ 'bg-gray-200': isActive('bold', updatedAt) }"
          class="p-2 rounded-md hover:bg-gray-100"
          title="Bold"
          >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
            <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
          </svg>
          </button>
          <button
          type="button"
          @click="toggleItalic()"
          :class="{ 'bg-gray-200': isActive('italic', updatedAt) }"
          class="p-2 rounded-md hover:bg-gray-100"
          title="Italic"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="4" x2="10" y2="4"></line>
            <line x1="14" y1="20" x2="5" y2="20"></line>
            <line x1="15" y1="4" x2="9" y2="20"></line>
          </svg>
        </button>
        <!-- Strikethrough Button -->
        <button
        type="button"
          @click="toggleStrike()"
          :class="{ 'bg-gray-200': isActive('strike', updatedAt) }"
          class="p-2 rounded-md hover:bg-gray-100"
          title="Strikethrough"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17.3 5H6.7C5.2 5 4 6.2 4 7.7v8.5c0 1.5 1.2 2.7 2.7 2.7h10.5c1.5 0 2.7-1.2 2.7-2.7V7.7c.1-1.5-1.1-2.7-2.6-2.7z"></path>
            <line x1="4" y1="12" x2="20" y2="12"></line>
          </svg>
        </button>

        <button type="button" @click="indentText()" class="p-1 rounded-md hover:bg-gray-100" title="Indent">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="8" x2="21" y2="8"></line>
            <line x1="8" y1="13" x2="21" y2="13"></line>
            <line x1="8" y1="18" x2="21" y2="18"></line>
            <polyline points="4 6 6 8 4 10"></polyline>
          </svg>
        </button>
        <button type="button" @click="outdentText()" class="p-1 rounded-md hover:bg-gray-100" title="Outdent">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="8" x2="21" y2="8"></line>
            <line x1="3" y1="13" x2="16" y2="13"></line>
            <line x1="3" y1="18" x2="16" y2="18"></line>
            <polyline points="6 6 4 8 6 10"></polyline>
          </svg>
        </button>
        <button
        type="button"
        @click="toggleBulletList()"
        :class="{ 'bg-gray-200': isActive('bulletList', updatedAt) }"
        class="p-2 rounded-md hover:bg-gray-100"
        title="Bullet List"
        >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="9" y1="6" x2="20" y2="6"></line>
          <line x1="9" y1="12" x2="20" y2="12"></line>
          <line x1="9" y1="18" x2="20" y2="18"></line>
          <circle cx="4" cy="6" r="2"></circle>
          <circle cx="4" cy="12" r="2"></circle>
          <circle cx="4" cy="18" r="2"></circle>
        </svg>
        </button>
        <button
        type="button"
          @click="clearFormatting()"
          class="p-2 rounded-md hover:bg-gray-100"
          title="Clear Formatting"
          >
          <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24">
            <path fill="black" d="m14.031 1.888l9.657 9.657l-8.345 8.345l-.27.272H20v2H6.748L.253 15.667zm.322 16.164l6.507-6.507l-6.829-6.828l-6.828 6.828l6.828 6.828l.32-.323zM5.788 12.96l-2.707 2.707l4.495 4.495h4.68l.365-.37z" />
          </svg>
          </button>
          <div class="relative">
            <button
            type="button"
              @click="colorPickerOpen = !colorPickerOpen; highlightPickerOpen = false;"
              class="px-3 py-2 text-sm font-medium bg-white rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"

            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                :fill="currentColor"
                :stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-droplet"
              >
                <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>
              </svg>
            </button>
            <div

              x-show="colorPickerOpen"
              @click.away="colorPickerOpen = false"
              class="absolute z-10 p-2 mt-2 bg-white rounded-md shadow-lg"
              x-cloak
            >
            <div class="flex flex-col space-y-2">
                <button type="button" @click="setTextColor('#000000')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveColor('#000000') }" class="w-6 h-6 bg-black rounded-full"></button>
                <button type="button" @click="setTextColor('#FF0000')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveColor('#FF0000') }" class="w-6 h-6 bg-red-500 rounded-full"></button>
                <button type="button" @click="setTextColor('#00FF00')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveColor('#00FF00') }" class="w-6 h-6 bg-green-500 rounded-full"></button>
                <button type="button" @click="setTextColor('#0000FF')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveColor('#0000FF') }" class="w-6 h-6 bg-blue-500 rounded-full"></button>
                <!-- Add more color buttons as needed -->
              </div>
            </div>
          </div>
           <!-- Highlight Color Picker -->
      <div class="relative">
        <button
        type="button"
          @click="highlightPickerOpen = !highlightPickerOpen; colorPickerOpen = false;"

           class="p-2 rounded-md hover:bg-gray-100"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="1.5rem"
            height="1.5rem"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="feather feather-edit-3"
          >
            <path d="M12 20h9"></path>
            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
          </svg>
          <div class="absolute bottom-0 right-0 w-4 h-4 border border-gray-300 rounded-full" :style="{ backgroundColor: currentHighlight }"></div>
        </button>
        <div
          x-show="highlightPickerOpen"
          @click.away="highlightPickerOpen = false"
          class="absolute z-10 p-2 mt-2 bg-white rounded-md shadow-lg"
          x-cloak
        >
        <div class="flex flex-col space-y-2">
            <button type="button" @click="setHighlightColor('yellow')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveHighlight('yellow') }" class="w-6 h-6 bg-yellow-300 rounded-full"></button>
            <button type="button" @click="setHighlightColor('lime')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveHighlight('lime') }" class="w-6 h-6 rounded-full bg-lime-300"></button>
            <button type="button" @click="setHighlightColor('cyan')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveHighlight('cyan') }" class="w-6 h-6 rounded-full bg-cyan-300"></button>
            <button type="button" @click="setHighlightColor('pink')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveHighlight('pink') }" class="w-6 h-6 bg-pink-300 rounded-full"></button>
            <button type="button" @click="setHighlightColor('transparent')" :class="{ 'ring-2 ring-offset-2 ring-indigo-500': isActiveHighlight('transparent') }" class="w-6 h-6 bg-white border border-gray-300 rounded-full"></button>
          </div>
        </div>
      </div>
    </div>
    <!-- tool bar2 -->
    <div class="flex flex-wrap items-center gap-2 p-4 rounded-tr-lg">
      <button type="button" @click="toggleTextLeft()" :class="{ 'bg-gray-200': isActive({ textAlign: 'left' }, updatedAt) }" class="p-2 rounded-md hover:bg-gray-100" title="Align Left">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="17" y1="10" x2="3" y2="10"></line>
          <line x1="21" y1="6" x2="3" y2="6"></line>
          <line x1="21" y1="14" x2="3" y2="14"></line>
          <line x1="17" y1="18" x2="3" y2="18"></line>
        </svg>
      </button>
      <button type="button" @click="toggleTextCenter()" :class="{ 'bg-gray-200': isActive({ textAlign: 'center' }, updatedAt) }" class="p-2 rounded-md hover:bg-gray-100" title="Align Center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="10" x2="6" y2="10"></line>
          <line x1="21" y1="6" x2="3" y2="6"></line>
          <line x1="21" y1="14" x2="3" y2="14"></line>
          <line x1="18" y1="18" x2="6" y2="18"></line>
        </svg>
      </button>
      <button type="button" @click="toggleTextRight()" :class="{ 'bg-gray-200': isActive({ textAlign: 'right' }, updatedAt) }" class="p-2 rounded-md hover:bg-gray-100" title="Align Right">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="21" y1="10" x2="7" y2="10"></line>
          <line x1="21" y1="6" x2="3" y2="6"></line>
          <line x1="21" y1="14" x2="3" y2="14"></line>
          <line x1="21" y1="18" x2="7" y2="18"></line>
        </svg>
      </button>
      <button type="button" @click="toggleTextJustify()" :class="{ 'bg-gray-200': isActive({ textAlign: 'justify' }, updatedAt) }" class="p-2 rounded-md hover:bg-gray-100" title="Justify">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="21" y1="10" x2="3" y2="10"></line>
          <line x1="21" y1="6" x2="3" y2="6"></line>
          <line x1="21" y1="14" x2="3" y2="14"></line>
          <line x1="21" y1="18" x2="3" y2="18"></line>
        </svg>
      </button>
       <!-- Table Dropdown -->
       <div class="relative" x-data="{ open: false }">
        <button type="button" @click="open = !open" class="p-2 text-gray-500 rounded hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z" clip-rule="evenodd" />
          </svg>
        </button>
        <div x-show="open" @click.away="open = false" class="absolute z-10 w-48 mt-2 bg-white rounded-md shadow-lg">
          <div class="py-1">
            <button type="button" @click="toggleInsertTable(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Insert Table</button>
            <button type="button" @click="toggleAddColumnBefore(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Add Column Before</button>
            <button type="button" @click="toggleAddColumnAfter(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Add Column After</button>
            <button type="button" @click="toggleDelColumn(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Delete Column</button>
            <button type="button" @click="toggleAddRowBefore(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Add Row Before</button>
            <button type="button" @click="toggleAddRowAfter(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Add Row After</button>
            <button type="button" @click="toggleDelRow(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Delete Row</button>
            <button type="button" @click="toggleDelTable(); open = false" class="block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-100">Delete Table</button>
          </div>
        </div>
      </div>

      <!-- Undo/Redo Buttons -->
      <button type="button" @click="toggleUndo()" class="p-2 text-gray-500 rounded hover:bg-gray-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 7v6h6"></path>
          <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"></path>
        </svg>
      </button>
      <button type="button" @click="toggleRedo()" class="p-2 text-gray-500 rounded hover:bg-gray-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 7v6h-6"></path>
          <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"></path>
        </svg>
      </button>

    </div>
    </div>
    <article class="prose max-w-none">
      <div x-ref="element"></div>
    </article>

</div>

