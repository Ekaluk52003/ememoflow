{% extends "_base.html" %}

{% block content %}
<div class="p-4 sm:p-6 lg:p-8">
    <div class="mx-auto max-w-7xl">
        <div class="mb-8 relative z-10">
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white tracking-tight">หลักการทำงานของกลุ่มผู้ใช้และสิทธิ์การเข้าถึง</h1>
            <p class="mt-2 text-lg text-gray-600 dark:text-gray-400">แผนภาพอธิบายการมองเห็นเอกสารและการเลือกผู้อนุมัติ</p>
            <!-- Background Glow -->
            <div class="absolute -top-20 -left-20 w-96 h-96 bg-neon-violet/20 blur-[100px] rounded-full -z-10 pointer-events-none"></div>
        </div>

        <!-- Section 1: Core Concepts -->
        <div class="mb-12">
            <h2 class="pb-2 mb-4 text-2xl font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-white/10 flex items-center gap-2">
                <i data-lucide="layers" class="w-6 h-6 text-neon-violet"></i>
                แนวคิดหลัก
            </h2>
            <div class="grid gap-6 md:grid-cols-3">
                <!-- BU Group Card -->
                <div class="p-6 bg-white/50 dark:bg-white/5 backdrop-blur-md rounded-xl border border-l-4 border-blue-500 border-gray-200 dark:border-white/10 shadow-lg hover:shadow-[0_0_20px_rgba(59,130,246,0.2)] transition-all">
                    <h3 class="mb-2 text-xl font-bold text-blue-600 dark:text-blue-400 flex items-center gap-2">
                        <i data-lucide="building-2" class="w-5 h-5"></i>
                        กลุ่มหน่วยธุรกิจ
                    </h3>
                    <p class="text-sm font-mono text-blue-500 dark:text-blue-300 mb-2 opacity-75">(เช่น `BU1`)</p>
                    <p class="text-gray-600 dark:text-gray-300">
                        กลุ่มเหล่านี้ใช้กำหนดแผนกหรือทีมของผู้ใช้ การมองเห็นเอกสารของผู้ใช้จะถูกจำกัดอยู่ภายในหน่วยธุรกิจของตนเองเป็นหลัก
                    </p>
                </div>
                <!-- BU Manager Group Card -->
                <div class="p-6 bg-white/50 dark:bg-white/5 backdrop-blur-md rounded-xl border border-l-4 border-neon-violet border-gray-200 dark:border-white/10 shadow-lg hover:shadow-[0_0_20px_rgba(255,95,31,0.2)] transition-all">
                    <h3 class="mb-2 text-xl font-bold text-neon-violet flex items-center gap-2">
                        <i data-lucide="crown" class="w-5 h-5"></i>
                        กลุ่มผู้จัดการ
                    </h3>
                    <p class="text-sm font-mono text-neon-violet/75 mb-2">(เช่น `BU1_Manager`)</p>
                    <p class="text-gray-600 dark:text-gray-300">
                        เป็นกลุ่มประเภทพิเศษ ผู้ใช้ที่อยู่ในกลุ่ม `_Manager` จะสามารถมองเห็น **เอกสารทั้งหมด** ที่ส่งโดยสมาชิกทุกคนในหน่วยธุรกิจนั้นๆ
                    </p>
                </div>
                <!-- Approver Group Card -->
                <div class="p-6 bg-white/50 dark:bg-white/5 backdrop-blur-md rounded-xl border border-l-4 border-green-500 border-gray-200 dark:border-white/10 shadow-lg hover:shadow-[0_0_20px_rgba(34,197,94,0.2)] transition-all">
                    <h3 class="mb-2 text-xl font-bold text-green-600 dark:text-green-400 flex items-center gap-2">
                        <i data-lucide="user-check" class="w-5 h-5"></i>
                        กลุ่มผู้อนุมัติ
                    </h3>
                    <p class="text-sm font-mono text-green-500 dark:text-green-300 mb-2 opacity-75">(เช่น `Sales_Approvers`)</p>
                    <p class="text-gray-600 dark:text-gray-300">
                        กลุ่มเหล่านี้ใช้กำหนดบทบาทในการทำงาน ใช้ในขั้นตอนของเวิร์กโฟลว์เพื่อระบุว่าใครมีคุณสมบัติในการอนุมัติเอกสาร
                    </p>
                </div>
            </div>
        </div>

        <!-- Section 2: Scenario Diagram -->
        <div>
            <h2 class="pb-2 mb-4 text-2xl font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-white/10 flex items-center gap-2">
                <i data-lucide="git-branch" class="w-6 h-6 text-neon-violet"></i>
                ตัวอย่างสถานการณ์
            </h2>
            <div class="p-6 bg-white/50 dark:bg-white/5 backdrop-blur-md rounded-xl border border-gray-200 dark:border-white/10 shadow-xl relative overflow-hidden">
                
                <!-- Scenario Description -->
                <div class="mb-8 relative z-10">
                    <div class="p-4 rounded-lg bg-gray-100 dark:bg-white/5 border border-gray-200 dark:border-white/10">
                        <p class="text-lg text-gray-800 dark:text-gray-200 mb-2">สมมติว่าผู้ใช้ชื่อ <strong class="text-neon-violet">คุณ</strong> กำลังส่งเอกสาร:</p>
                        <ul class="list-disc ml-6 space-y-1 text-gray-600 dark:text-gray-400">
                            <li>คุณเป็นสมาชิกของกลุ่ม <span class="font-bold text-blue-600 dark:text-blue-400">BU1</span></li>
                            <li>ขั้นตอนของเวิร์กโฟลว์นี้ต้องการผู้อนุมัติจากกลุ่ม <span class="font-bold text-green-600 dark:text-green-400">Sales_Approvers</span></li>
                        </ul>
                    </div>
                    <p class="mt-6 text-xl font-bold text-center text-neon-violet animate-pulse">ใครจะปรากฏในรายการ "เลือกผู้อนุมัติ" บ้าง?</p>
                </div>

                <!-- Diagram Layout -->
                <div class="flex flex-col gap-8 items-start lg:flex-row relative z-10">
                    
                    <!-- Left Side: Users -->
                    <div class="space-y-4 w-full lg:w-1/2">
                        <h3 class="text-lg font-bold text-gray-700 dark:text-gray-300 text-center mb-4">รายชื่อผู้อนุมัติที่เป็นไปได้ในกลุ่ม <span class="text-green-600 dark:text-green-400">Sales_Approvers</span>:</h3>
                        
                        <!-- Alice Card -->
                        <div class="p-4 bg-green-50/80 dark:bg-green-900/20 rounded-xl border-2 border-green-400/50 dark:border-green-500/30 shadow-lg transform transition-all hover:scale-[1.02]">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 rounded-full bg-green-200 dark:bg-green-800 flex items-center justify-center text-green-800 dark:text-green-100 font-bold text-xl">
                                    A
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2">
                                        Alice
                                        <span class="px-2 py-0.5 text-xs rounded-full bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-100">เลือกได้</span>
                                    </p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">สมาชิกของ: <span class="font-semibold text-green-600 dark:text-green-400">Sales_Approvers</span>, <span class="font-semibold text-blue-600 dark:text-blue-400">BU1</span></p>
                                </div>
                                <i data-lucide="check-circle" class="w-6 h-6 text-green-500 ml-auto"></i>
                            </div>
                        </div>
                        
                        <!-- Bob Card -->
                        <div class="p-4 bg-red-50/80 dark:bg-red-900/20 rounded-xl border-2 border-red-400/50 dark:border-red-500/30 shadow-lg opacity-75 hover:opacity-100 transition-opacity">
                           <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 rounded-full bg-red-200 dark:bg-red-800 flex items-center justify-center text-red-800 dark:text-red-100 font-bold text-xl">
                                    B
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2">
                                        Bob
                                        <span class="px-2 py-0.5 text-xs rounded-full bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-100">ไม่ได้</span>
                                    </p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">สมาชิกของ: <span class="font-semibold text-green-600 dark:text-green-400">Sales_Approvers</span>, <span class="font-semibold text-gray-500">BU2</span></p>
                                </div>
                                <i data-lucide="x-circle" class="w-6 h-6 text-red-500 ml-auto"></i>
                            </div>
                        </div>
                        
                        <!-- Charlie Card -->
                        <div class="p-4 bg-green-50/80 dark:bg-green-900/20 rounded-xl border-2 border-green-400/50 dark:border-green-500/30 shadow-lg transform transition-all hover:scale-[1.02]">
                             <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 rounded-full bg-green-200 dark:bg-green-800 flex items-center justify-center text-green-800 dark:text-green-100 font-bold text-xl">
                                    C
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2">
                                        Charlie
                                        <span class="px-2 py-0.5 text-xs rounded-full bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-100">เลือกได้ (Manager)</span>
                                    </p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">สมาชิกของ: <span class="font-semibold text-green-600 dark:text-green-400">Sales_Approvers</span>, <span class="font-semibold text-neon-violet">BU1_Manager</span></p>
                                </div>
                                <i data-lucide="check-circle" class="w-6 h-6 text-green-500 ml-auto"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Right Side: Explanation -->
                    <div class="p-6 mt-10 w-full bg-gray-100/50 dark:bg-white/5 rounded-xl lg:w-1/2 border border-gray-200 dark:border-white/10">
                        <h3 class="mb-4 text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2">
                            <i data-lucide="info" class="w-5 h-5 text-neon-violet"></i>
                            คำอธิบายหลักการคัดเลือก:
                        </h3>
                        <ul class="space-y-4 text-gray-700 dark:text-gray-300">
                            <li class="flex items-start gap-3">
                                <div class="mt-1"><i data-lucide="check" class="w-5 h-5 text-green-500"></i></div>
                                <div>
                                    <span class="font-bold text-gray-900 dark:text-white">Alice สามารถถูกเลือกได้</span> เพราะเธออยู่ในกลุ่ม <span class="font-semibold text-green-600 dark:text-green-400">Sales_Approvers</span> และอยู่ในหน่วยธุรกิจ <span class="font-semibold text-blue-600 dark:text-blue-400">BU1</span> เดียวกับผู้ส่ง
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <div class="mt-1"><i data-lucide="x" class="w-5 h-5 text-red-500"></i></div>
                                <div>
                                    <span class="font-bold text-gray-900 dark:text-white">Bob ไม่สามารถถูกเลือกได้</span> เพราะแม้ว่าจะอยู่ในกลุ่ม <span class="font-semibold text-green-600 dark:text-green-400">Sales_Approvers</span> แต่หน่วยธุรกิจของเขา (<span class="text-gray-500 dark:text-gray-400">BU2</span>) ไม่ตรงกับของผู้ส่ง (<span class="text-blue-600 dark:text-blue-400">BU1</span>)
                                </div>
                            </li>
                             <li class="flex items-start gap-3">
                                <div class="mt-1"><i data-lucide="check" class="w-5 h-5 text-green-500"></i></div>
                                <div>
                                    <span class="font-bold text-gray-900 dark:text-white">Charlie สามารถถูกเลือกได้</span> เพราะเขาอยู่ในกลุ่ม <span class="font-semibold text-green-600 dark:text-green-400">Sales_Approvers</span> และกลุ่มผู้จัดการของเขา (<span class="font-semibold text-neon-violet">BU1_Manager</span>) สัมพันธ์กับหน่วยธุรกิจของผู้ส่ง
                                </div>
                            </li>
                        </ul>

                        <div class="my-6 h-px bg-gray-200 dark:bg-white/10"></div>

                        <h3 class="mb-4 text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2">
                            <i data-lucide="eye" class="w-5 h-5 text-neon-violet"></i>
                            หลักการมองเห็นเอกสาร:
                        </h3>
                         <ul class="space-y-4 text-gray-700 dark:text-gray-300">
                             <li class="flex items-start gap-3">
                                <div class="mt-1"><i data-lucide="user-check" class="w-5 h-5 text-green-500"></i></div>
                                <div>
                                    <span class="font-bold text-gray-900 dark:text-white">ผู้อนุมัติที่ถูกเลือก (เช่น Alice) สามารถเห็นเอกสาร</span> ที่กำลังรอการอนุมัติจากตนเอง เพื่อให้สามารถดำเนินการได้
                                </div>
                            </li>
                             <li class="flex items-start gap-3">
                                <div class="mt-1"><i data-lucide="crown" class="w-5 h-5 text-neon-violet"></i></div>
                                <div>
                                    <span class="font-bold text-gray-900 dark:text-white">Charlie (ในฐานะ <span class="text-neon-violet">BU1_Manager</span>) สามารถเห็นเอกสารทั้งหมด</span> ที่ส่งโดยสมาชิกทุกคนใน <span class="text-blue-600 dark:text-blue-400">BU1</span> หรือ <span class="text-neon-violet">BU1_Manager</span> นี่เป็นสิทธิ์พิเศษของผู้จัดการ
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <div class="mt-1"><i data-lucide="user" class="w-5 h-5 text-blue-500"></i></div>
                                <div>
                                    <span class="font-bold text-gray-900 dark:text-white">Alice (ในฐานะสมาชิก <span class="text-blue-600 dark:text-blue-400">BU1</span>) จะเห็นเอกสารได้</span> เฉพาะที่เธอส่งเอง, ถูก CC ถึง, เอกสารที่รอเธออนุมัติ, หรือเอกสารในเวิร์กโฟลว์ที่อนุญาตให้กลุ่ม <span class="text-blue-600 dark:text-blue-400">BU1</span> เข้าถึงได้เท่านั้น
                                </div>
                            </li>
                         </ul>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div>
{% endblock %}